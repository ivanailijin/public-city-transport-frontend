<div class="container mt-4" style="max-width: 1050px;">
    <div class="row justify-content-center">
      <div class="col-12 text-center">
        <h1 class="mt-3" style="color: #396b94;">Purchased Tickets</h1>
      </div>
    </div>
    <div class="row mt-5 justify-content-center">
      <div class="col-auto">
        <ul class="nav nav-underline justify-content-center">
          <li class="nav-item">
            <a class="nav-link active" [class.active]="selectedNavItem === 'unpersonalized'" (click)="showUnpersonalized()" style="color: #396b94; cursor: pointer;">Non-Personalized</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" [class.active]="selectedNavItem === 'personalized'" (click)="showPersonalized()" style="color: #396b94; cursor: pointer;">Personalized</a>
          </li>
        </ul>
      </div>
    </div>
    <div *ngIf="selectedNavItem === 'unpersonalized'" class="row mt-5">
        <div class="mb-2">
            <div class="d-flex align-items-center">
              <h4 class="mt-2" style="color: #4682B4; width: 100%; max-width: 520px; margin-left:12%">
                One time, day & weekly tickets
              </h4>
              <button type="button" (click)="navigateToUnpersonalizedPurchase()" class="btn btn-primary" style="background-color: #4682B4; border: none; border-radius: 5px; padding: 10px 20px; font-size: 16px;">
                Buy Non-Personalized Ticket
              </button>
            </div>
          </div>

          <div class="mb-3" style="border-bottom: 3px solid #4682B4; width: 100%; max-width: 760px; margin-left:13%; opacity: 0.8;">
        </div> 
          <div *ngIf="unpersonalizedTickets.length > 0" class="d-flex flex-wrap justify-content-center">
            <div class="card mb-3 mx-2" *ngFor="let unpersonalized of unpersonalizedTickets" style="width: 670px; max-height:230px">
              <div class="row g-0">
                <div class="col-md-4 p-1">
                  <img src="assets/pictures/barcode.jpg" class="img-fluid rounded-start" alt="Ticket Icon">
                </div>
                <div class="col-md-8">
                  <div class="card-body mt-3">
                    <h5 class="card-title mb-4" style="color: #424242">{{unpersonalizedTypeToString(unpersonalized.unpersonalizedType)}}</h5>
                    <p class="card-text"><span style="font-weight: 500; color: #5a5a5a;">Ticket Zone • </span> {{unpersonalized.zone}}</p>
                    <p *ngIf="unpersonalized.unpersonalizedType === 0" class="card-text"><span style="font-weight: 500; color: #5a5a5a;">Line & Direction • </span> {{unpersonalized.lineName}}, {{unpersonalized.directionName}}</p>
                    <p *ngIf="unpersonalized.unpersonalizedType === 0" class="card-text"><span style="font-weight: 500; color: #5a5a5a;">Departure Time • </span> {{unpersonalized.departureTime}}</p>
                    <p class="card-text" style="position: absolute; top: 33px; right: 30px; font-size: 14px; color: #6c757d;">
                     {{unpersonalized.purchaseDate | date:'medium'}}
                    </p>
                    <p class="card-text" style="font-weight: 500; position: absolute; bottom: 33px; right: 30px; font-size: 16px; color: #5a5a5a;">
                      {{unpersonalized.currentPrice}} RSD
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div> 
          <div *ngIf="unpersonalizedTickets.length == 0" class="mt-2 fw-semibold secondary" style="margin-left:12%; color: #ac1212; text-underline-offset: 8px;">
            No non-personalized tickets have been purchased.
          </div>
    </div>
    <div *ngIf="selectedNavItem === 'personalized'" class="row mt-5">
        <div class="mb-2">
            <div class="d-flex align-items-center">
              <h4 class="mt-2" style="color: #4682B4; width: 100%; max-width: 520px; margin-left:12%">
                Monthly & Annual tickets
              </h4>
              <button type="button" (click)="navigateToPersonalizedPurchase()" class="btn btn-primary" style="background-color: #4682B4; border: none; border-radius: 5px; padding: 10px 20px; font-size: 16px;">
                Create Personalized Ticket Request
              </button>
            </div>
          </div>

          <div class="mb-3" style="border-bottom: 3px solid #4682B4; width: 100%; max-width: 760px; margin-left:13%; opacity: 0.8;">
        </div> 
          <div *ngIf="personalizedTickets.length > 0" class="d-flex flex-wrap justify-content-center">
            <div class="card mb-3 mx-2" *ngFor="let personalized of personalizedTickets" style="width: 670px; max-height:230px">
              <div class="row g-0">
                <div class="col-md-4 p-1">
                  <img src="assets/pictures/barcode.jpg" class="img-fluid rounded-start" alt="Ticket Icon">
                </div>
                <div class="col-md-8">
                  <div class="card-body mt-3">
                    <h5 class="card-title mb-4" style="color: #424242">{{personalizedTypeToString(personalized.personalizedType)}}</h5>
                    <p class="card-text"><span style="font-weight: 500; color: #5a5a5a;">Ticket Zone • </span> {{personalized.zone}}</p>
                    <p class="card-text"><span style="font-weight: 500; color: #5a5a5a;">Name • </span> {{customer.name}}</p>
                    <p class="card-text"><span style="font-weight: 500; color: #5a5a5a;">Surname • </span> {{customer.surname}}</p>
                    <p class="card-text" style="position: absolute; top: 33px; right: 30px; font-size: 14px; color: #6c757d;">
                     {{personalized.purchaseDate | date:'medium'}}
                    </p>
                    <p class="card-text" style="font-weight: 500; position: absolute; bottom: 33px; right: 30px; font-size: 16px; color: #5a5a5a;">
                      {{personalized.currentPrice}} RSD
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div> 
          <div *ngIf="personalizedTickets.length == 0" class="mt-2 fw-semibold secondary" style="margin-left:12%; color: #ac1212; text-underline-offset: 8px;">
            No Personalized tickets have been purchased.
          </div>
    </div>
  </div>